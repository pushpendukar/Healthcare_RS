<!DOCTYPE html>

<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
        List Page
    </title>
    <!-- <div>
            <img src="img/register_head.png" width="30%" height="auto">
        </div> -->
    <h1 id="head" style="font-family: Helvetica;font-weight: bolder;">Here are recommended doctors</h1>
</head>
<link rel="stylesheet" type="text/css" href="css/list.css">
<link rel="stylesheet" type="text/css" href="js/list.js">
<script src="js/jquery-2.2.3.min.js" type="text/javascript"></script>
<script src="js/jquery-ui.min.js" type="text/javascript"></script>
<script src="js/constant.js"></script>

<body background="img/bg1.2.jpg" style="background-size:100%; background-attachment: fixed;">
    <!-- <form name="mysymptom" onsubmit="return getSymptom()" method="post" id="mysymptom"> -->
    <!-- <select id="sort" name="sort">
                <option value="Nsort">Unsorted</option>
                <option value="Ysort">Sorted by score </option>
        </select> -->
    <div id="tabbar">
        <img src="img/logo.jpg" style="height:100px;width:100px;">
    </div>
    <select type="submit" id="logout" onchange="logout()">
        <option id="option1">
        </option>
        <option id="option2">Logout</option>

    </select>
    <div class="flex-item">
        <div>
            <button id="sort" name="sort" onclick="sortbyScore()" style="font-family: Helvetica;font-weight: bolder;">
                <span id="sorttxt">
                    <!-- <p id="Ysort">Click here to Sort by score</p> -->
                    Click here to sort by score
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <button class="btn" onclick="showDetail(0)">
            <div class="docphoto">

            </div>
            <span>
                <p class="doctor">Name: Doctor A</p>
                <p class="score">Score: 4.9</p>
                <p class="hname">Hospital: No.1 hospital</p>
            </span>
        </button>
    </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(1)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(2)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor C</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.3 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(3)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor D</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.4 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(4)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor E</p>
                    <p class="score">Score: 4.8</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(5)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor F</p>
                    <p class="score">Score: 4.8</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>

    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(6)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(7)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(8)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(9)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(10)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(11)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(12)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(13)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p clss="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(14)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(15)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(16)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(17)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(18)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(19)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(20)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(21)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(22)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(23)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(24)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(25)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(26)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(27)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(28)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(29)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(30)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(31)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(32)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(33)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(34)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(35)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(36)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(37)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(38)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor A</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.1 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <div class="flex-item">
        <div>
            <button class="btn" onclick="showDetail(39)">
                <div class="docphoto">

                </div>
                <span>
                    <p class="doctor">Name: Doctor B</p>
                    <p class="score">Score: 4.9</p>
                    <p class="hname">Hospital: No.2 hospital</p>
                </span>
            </button>
        </div>
    </div>
    <script type="text/javascript">
        var data = localStorage["data"];
        var obj = JSON.parse(data);
        var objtemp = JSON.parse(data);
        var arr = obj.doctorArray;
        var arrtemp = objtemp.doctorArray;
        var doctor = document.getElementsByClassName("doctor");
        var score = document.getElementsByClassName("score");
        var hname = document.getElementsByClassName("hname");
        var btn = document.getElementsByClassName("btn");
        var count = 0;
        window.onload = function () {
            localStorage.sort = 1;
            var name = localStorage.username;
            // console.log(name);
            document.getElementById('option1').innerHTML = name;
            var btn = document.getElementById("logout");
            for (var i = 0; i < 40; i++) {
                var scored = Object(score[i]);
                doctor[i].innerHTML = "Name: " + arr[i].dname;
                hname[i].innerHTML = "Hospital: " + arr[i].hname;
                scored.innerHTML = "Score: " + arr[i].score;
                // console.log(arr[i].hname);
            }
            // var name=obj.doctorArray[i].dname;
            // btn[i].onclick=function(){
            //     window.location.href="/detail.html"+name;  
            // }
        }

        // var slct=document.getElementById("sort");
        // console.log(slct);
        // var decision=slct.value;

        function sortbyScore() {
            // var index = slct.selectedIndex;//获取被选中的索引
            // var decision = slct.options[index].value;
            // console.log(decision);
            // if (decision==="Ysort") {
            // var arr = obj.doctorArray;
            if (localStorage.sort === "1") {
                document.getElementById("sorttxt").innerHTML = "Click here to sort by recommandation";
                localStorage.sort = 0;

            } else {
                document.getElementById("sorttxt").innerHTML = "Click here to sort by score";
                localStorage.sort = 1;
            }

            count++;
            if (count % 2 != 0) {
                arr.sort(compare("score"));
                function compare(protoTypeName) {
                    return function (object1, object2) {
                        var val1 = object1[protoTypeName];
                        var val2 = object2[protoTypeName];
                        if (val1 > val2) {
                            return -1;
                        } else if (val1 < val2) {
                            return 1;
                        } else {
                            return 0;
                        }
                    }
                }
                // console.log(arr);
                for (var i = 0; i < 40; i++) {
                    var scored = Object(score[i]);
                    doctor[i].innerHTML = "Name: " + arr[i].dname;
                    scored.innerHTML = "Score: " + arr[i].score;
                    hname[i].innerHTML = "Hospital: " + arr[i].hname;
                    // var name=obj.doctorArray[i].dname;
                    // btn[i].onclick=function(){
                    //     window.location.href="/detail.html"+name;  
                    // }
                }
            }
            else {
                for (var j = 0; j < 40; j++) {
                    var scored = Object(score[j]);
                    doctor[j].innerHTML = "Name: " + arrtemp[j].dname;
                    hname[j].innerHTML = "Hospital: " + arrtemp[j].hname;
                    scored.innerHTML = "Score: " + arrtemp[j].score;
                }
            }
        }
        function logout() {
            localStorage.tokenp = "";
            // console.log(localStorage.username);
            window.location.href = './login.html';
        }
        function showDetail(select) {
            var did = arr[select].id;
            if (window.localStorage) {
                // localStorage.setItem('detailId',did);
                localStorage.docid = did;
                console.log(localStorage);
                location.href = './detail.html';
            }
            else {
                alert("NOT SUPPORT");
            }
        }

        // $('#showid').html(name) // 给id选择器相对应标签渲染传递过来的参数
    // $("#submit").click(function(){
    //     $.ajax({
    //         type:"POST",
    //         url:"http://localhost:1266/recommendation/search",
    //         dataType:"json",
    //         data:{"symptom": [
    //             "out of breath"
    //         ]},
    //         headers: {
    //             "content-type": 'application/json;charset=UTF-8',
    //             "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwidHlwZSI6MiwiaWF0IjoxNjc5Mjk2Mzg1LCJleHAiOjE2NzkzMzk1ODV9.7JAymCFhU3RiJiC8ld--roTO3Zc8CxDbPJ8LObp6JFE"
    //             },
    //         success:function(data){
    //             console.log("eeeeee");
    //             var listdata=data1.list;
    //             if(listdata.length>0){
    //                 var listinfo="";
    //                 $each(listdata,function(){
    //                     listinfo+="<p id='doctor'>Doctor: "+this.dname+"</p>"+"<p id='score'>Score: "+this.score+"</p>"+"<p id='hname'>Hospital: "+this.hname+"</p>"
    //                 });
    //                 console.log(listdata);
    //                 $("#list")[0].innerHTML=listinfo;
    //             }
    //         }
    //     })
    // })

    </script>
    <!-- </form> -->
    <!-- <div id="div1" class="st1"></div> -->
</body>
<!-- <script type="text/javascript"> -->
<!-- //     m1(1,5,6)
    //     function m1(index, allnum, pagesize) {
    //     var allpage = allnum / pagesize;
    //     allpage = parseInt(allpage);
    //     allpage = allnum % 10 > 0 ? allpage + 1 : allpage;
    //     if (index < 1) index = 1;
    //     if (index > allpage) index = allpage;
    //     var x = document.getElementById("div1");
    //     var h = '<div class="st2" onclick="m1(1,' + allnum + ',' + pagesize + ')">First Page</div>';
    //     h += '<div class="st2" onclick="m1(' + (index - 1) + ',' + allnum + ',' + pagesize + ')">Previous Page</div>';
    //     if (index < 3) {
    //         if (index == 1) {
    //             h += '<div class="st2 chosed" onclick="m1(1,' + allnum + ',' + pagesize + ')">1</div>';
    //             h += '<div class="st2" onclick="m1(2,' + allnum + ',' + pagesize + ')">2</div>';
    //         } else {
    //             h += '<div class="st2" onclick="m1(1,' + allnum + ',' + pagesize + ')">1</div>';
    //             h += '<div class="st2 chosed" onclick="m1(2,' + allnum + ',' + pagesize + ')">2</div>';
    //         }
    //         h += '<div class="st2" onclick="m1(3,' + allnum + ',' + pagesize + ')">3</div>';
    //         h += '<div class="st2"onclick="m1(4,' + allnum + ',' + pagesize + ')">4</div>';
    //         h += '<div class="st2" onclick="m1(5,' + allnum + ',' + pagesize + ')">5</div>';
 
    //     }
    //     if (index >= 3 && index <= (allpage - 2)) {
    //         // h += '<div class="st2" onclick="m1(' + (index - 2) + ',' + allnum + ',' + pagesize + ')">' + (index - 2) + '</div>';
    //         h += '<div class="st2"onclick="m1(' + (index - 1) + ',' + allnum + ',' + pagesize + ')">' + (index - 1) + '</div>';
    //         h += '<div class="st2 chosed" onclick="m1(' + index + ',' + allnum + ',' + pagesize + ')">' + index + '</div>';
    //         h += '<div class="st2" onclick="m1(' + (index + 1) + ',' + allnum + ',' + pagesize + ')">' + (index + 1) + '</div>';
    //         h += '<div class="st2" onclick="m1(' + (index + 2) + ',' + allnum + ',' + pagesize + ')">' + (index + 2) + '</div>';
 
    //     }
    //     if (index > (allpage - 2)) {
    //         // h += '<div class="st2" onclick="m1(' + (index - 4) + ',' + allnum + ',' + pagesize + ')">' + (index - 4) + '</div>';
    //         // h += '<div class="st2"onclick="m1(' + (index - 3) + ',' + allnum + ',' + pagesize + ')">' + (index - 3) + '</div>';
    //         // h += '<div class="st2" onclick="m1(' + (index - 2) + ',' + allnum + ',' + pagesize + ')">' + (index - 2) + '</div>';
    //         if (index == allpage) {
    //             h += '<div class="st2" onclick=" m1(' + (allpage - 1) + ',' + allnum + ',' + pagesize + ')">' + (allpage - 1) + '</div>';
    //             h += '<div class="st2 chosed" onclick=" m1(' + allpage + ',' + allnum + ',' + pagesize + ')">' + allpage + '</div>';
    //         } else {
    //             h += '<div class="st2" onclick=" m1(' + (allpage - 1) + ',' + allnum + ',' + pagesize + ')">' + (allpage - 1) + '</div>';
    //             h += '<div class="st2 chosed" onclick=" m1(' + allpage + ',' + allnum + ',' + pagesize + ')">' + allpage + '</div>';
    //         }
    //     }
 
    //     h += '<div class="st2" onclick=" m1(' + (index + 1) + ',' + allnum + ',' + pagesize + ')">Next Page</div>';
 
    //     h += '<div class="st2" onclick=" m1(' + allpage + ',' + allnum + ',' + pagesize + ')">Last Page</div>';
    //     h += '<div class="st2"><input id="pageindex" type="text" style="width:50px;height:26px;border:0px;"> </div>';
    //     // h += '<div class="st2" onclick="gopage(' + allnum + ',' + pagesize + ')">跳转</div>';
    //     x.innerHTML = h;
    // }
 
    // function gopage(allnum, pagesize) {
    //     var text = document.getElementById("pageindex").value;
    //     text = parseInt(text);
    //     m1(text, allnum, pagesize);
    // } -->
<!-- </script> -->

</html>